---
name: scheduled-task
description: åˆ›å»ºå’Œç®¡ç†å®šæ—¶ä»»åŠ¡ï¼Œæ”¯æŒæŸ¥çœ‹ã€ä¿®æ”¹ã€å¯ç”¨/ç¦ç”¨ã€åˆ é™¤åŠåˆ›å»ºå®šæ—¶ä»»åŠ¡ã€‚å½“ç”¨æˆ·æƒ³è®¾ç½®ã€ä¿®æ”¹æˆ–ç®¡ç†å®šæœŸè‡ªåŠ¨æ‰§è¡Œçš„ä»»åŠ¡æ—¶ä½¿ç”¨ã€‚Create and manage scheduled tasks for recurring or one-time automated execution.
official: true
---

# å®šæ—¶ä»»åŠ¡ Skill

## âš ï¸ æ ¸å¿ƒåŸåˆ™

### åŸåˆ™ä¸€ï¼šä¼˜å…ˆä¿®æ”¹å·²æœ‰ä»»åŠ¡

> å½“ç”¨æˆ·è¯´"ä¿®æ”¹/æ›´æ”¹/è°ƒæ•´æŸä¸ªå®šæ—¶ä»»åŠ¡"æ—¶ï¼Œ**ç»å¯¹ä¸è¦åˆ›å»ºæ–°ä»»åŠ¡**ã€‚
> æ­£ç¡®æµç¨‹ï¼šâ‘  åˆ—å‡ºä»»åŠ¡ â†’ â‘¡ æ‰¾åˆ°ç›®æ ‡ä»»åŠ¡ ID â†’ â‘¢ è°ƒç”¨ update è„šæœ¬ä¿®æ”¹

### åŸåˆ™äºŒï¼šIM å‘é€ = é€šçŸ¥å¹³å°ï¼Œä¸æ˜¯ prompt

> å½“ç”¨æˆ·è¯´"å‘åˆ°é’‰é’‰/é£ä¹¦/Telegram/Discord"æ—¶ï¼Œè¿™æ˜¯**é€šçŸ¥æŠ•é€’éœ€æ±‚**ï¼Œåº”è®¾ç½® `notifyPlatforms` å­—æ®µï¼Œ**ä¸è¦**å†™è¿› `prompt`ã€‚
>
> ä»»åŠ¡å®Œæˆåï¼Œç³»ç»Ÿä¼š**è‡ªåŠ¨**å°† Claude çš„æ‰§è¡Œç»“æœå‘é€åˆ°æŒ‡å®š IM å¹³å°ï¼Œæ— éœ€åœ¨ prompt ä¸­é¢å¤–æŒ‡ç¤º"å‘é€åˆ° XX"ã€‚
>
> **æ­£ç¡®åšæ³•ï¼š**
> - `prompt`: `"æŸ¥è¯¢ä»Šå¤©çš„å¤©æ°”å¹¶æ•´ç†æˆæŠ¥å‘Š"` â€” åªæè¿°è¦æ‰§è¡Œçš„åŠ¨ä½œ
> - `notifyPlatforms`: `["dingtalk"]` â€” ç³»ç»Ÿè‡ªåŠ¨æŠŠç»“æœå‘åˆ°é’‰é’‰
>
> **é”™è¯¯åšæ³•ï¼š**
> - `prompt`: `"æŸ¥è¯¢ä»Šå¤©çš„å¤©æ°”å¹¶å‘é€åˆ°é’‰é’‰ç¾¤"` â€” âŒ ä¸è¦æŠŠ IM å‘é€å†™è¿› prompt
>
> å¸¸è§è§¦å‘è¯æ˜ å°„ï¼š
> | ç”¨æˆ·è¯´çš„ | å¯¹åº” notifyPlatforms å€¼ |
> |---------|----------------------|
> | å‘åˆ°é’‰é’‰/é’‰é’‰ç¾¤/DingTalk | `"dingtalk"` |
> | å‘åˆ°é£ä¹¦/Lark | `"feishu"` |
> | å‘åˆ° Telegram/TG/ç”µæŠ¥ | `"telegram"` |
> | å‘åˆ° Discord | `"discord"` |
> | å‘åˆ°äº‘ä¿¡/ç½‘æ˜“äº‘ä¿¡/NIM | `"nim"` |

### åŸåˆ™ä¸‰ï¼šä»ç”¨æˆ·è‡ªç„¶è¯­è¨€ä¸­æ­£ç¡®æå–å„å­—æ®µ

> ç”¨æˆ·é€šå¸¸ä¸€å¥è¯åŒ…å«æ‰€æœ‰æ„å›¾ã€‚ä½ éœ€è¦å°†å…¶æ‹†è§£ä¸ºå®šæ—¶ä»»åŠ¡çš„å„ä¸ªå­—æ®µï¼Œ**ä¸è¦**æŠŠæ‰€æœ‰å†…å®¹éƒ½å¡è¿› `prompt`ã€‚

**å­—æ®µæå–æ˜ å°„ï¼š**

| ç”¨æˆ·æè¿°ä¸­çš„æˆåˆ† | å¯¹åº”å­—æ®µ | æå–æ–¹å¼ |
|---|---|---|
| æ—¶é—´/é¢‘ç‡ï¼ˆæ¯å¤©9ç‚¹ã€å‘¨ä¸€ã€æ¯30åˆ†é’Ÿâ€¦ï¼‰ | `schedule` | è½¬æ¢ä¸º cron/at/interval |
| è¦åšçš„äº‹æƒ…ï¼ˆæ ¸å¿ƒåŠ¨ä½œï¼‰ | `prompt` | å±•å¼€ä¸ºå®Œæ•´ç‹¬ç«‹æŒ‡ä»¤ï¼ˆè§ä¸‹æ–¹ prompt ç¼–å†™è§„èŒƒï¼‰ |
| å‘åˆ°æŸä¸ª IMï¼ˆé’‰é’‰ã€é£ä¹¦ã€TGâ€¦ï¼‰ | `notifyPlatforms` | æ˜ å°„ä¸ºå¹³å°æ•°ç»„ï¼ˆè§åŸåˆ™äºŒï¼‰ï¼Œ**ä¸è¦**å†™è¿› prompt |
| ä»»åŠ¡ç®€ç§°ï¼ˆå¯ä»åŠ¨ä½œæ¨æ–­ï¼‰ | `name` | æç‚¼ç®€çŸ­åç§° |
| æ¶‰åŠç‰¹å®šç›®å½•/é¡¹ç›® | `workingDirectory` | æå–ç›®å½•è·¯å¾„ |
| åˆ°æœŸ/æˆªæ­¢ï¼ˆåªè·‘åˆ°æœˆåº•ã€åˆ°3æœˆä¸ºæ­¢â€¦ï¼‰ | `expiresAt` | è½¬æ¢ä¸º `"YYYY-MM-DD"` |
| æ‰§è¡Œç¯å¢ƒï¼ˆåœ¨æ²™ç®±é‡Œè·‘â€¦ï¼‰ | `executionMode` | `"sandbox"` / `"local"` |

**å®Œæ•´æ‹†è§£ç¤ºä¾‹ï¼š**

**ç¤ºä¾‹ 1**ï¼šç”¨æˆ·è¯´ `"æ¯å¤©æ—©ä¸Š9ç‚¹å¸®æˆ‘æŸ¥ä¸€ä¸‹AIæ–°é—»å‘åˆ°é’‰é’‰"`

```json
{
  "name": "æ¯æ—¥AIæ–°é—»æ’­æŠ¥",
  "schedule": { "type": "cron", "expression": "0 9 * * *" },
  "prompt": "è¯·æœç´¢å¹¶æ•´ç†ä»Šå¤©æœ€é‡è¦çš„ AI é¢†åŸŸæ–°é—»ï¼ˆä¸å°‘äº 5 æ¡ï¼‰ï¼Œæ¯æ¡åŒ…å«æ ‡é¢˜ã€æ¥æºå’Œä¸€å¥è¯æ‘˜è¦ã€‚æŒ‰é‡è¦æ€§æ’åºï¼Œè¾“å‡ºä¸ºæ¸…æ™°çš„åˆ—è¡¨æ ¼å¼ã€‚",
  "notifyPlatforms": ["dingtalk"]
}
```
> æ³¨æ„ï¼š`prompt` ä¸­**æ²¡æœ‰**"å‘åˆ°é’‰é’‰"â€”â€”IM å‘é€ç”± `notifyPlatforms` å¤„ç†ã€‚

**ç¤ºä¾‹ 2**ï¼šç”¨æˆ·è¯´ `"å·¥ä½œæ—¥ä¸‹åˆ6ç‚¹è·‘ä¸€ä¸‹é¡¹ç›®æµ‹è¯•ï¼Œç»“æœå‘é£ä¹¦"`

```json
{
  "name": "å·¥ä½œæ—¥é¡¹ç›®æµ‹è¯•",
  "schedule": { "type": "cron", "expression": "0 18 * * 1-5" },
  "prompt": "åœ¨å½“å‰é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œå®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼ˆnpm test æˆ–å¯¹åº”çš„æµ‹è¯•å‘½ä»¤ï¼‰ï¼Œæ”¶é›†æµ‹è¯•ç»“æœã€‚è¾“å‡ºæµ‹è¯•é€šè¿‡/å¤±è´¥çš„ç»Ÿè®¡æ‘˜è¦ï¼Œåˆ—å‡ºæ‰€æœ‰å¤±è´¥çš„æµ‹è¯•ç”¨ä¾‹åŠå…¶é”™è¯¯ä¿¡æ¯ã€‚",
  "notifyPlatforms": ["feishu"]
}
```

**ç¤ºä¾‹ 3**ï¼šç”¨æˆ·è¯´ `"æ¯å‘¨ä¸€æ—©ä¸Š8ç‚¹æ€»ç»“ä¸Šå‘¨çš„Gitæäº¤"`

```json
{
  "name": "å‘¨æŠ¥-Gitæäº¤æ€»ç»“",
  "schedule": { "type": "cron", "expression": "0 8 * * 1" },
  "prompt": "æ‰§è¡Œ git log æŸ¥çœ‹è¿‡å» 7 å¤©çš„æ‰€æœ‰æäº¤è®°å½•ã€‚æŒ‰ä½œè€…åˆ†ç»„ç»Ÿè®¡æäº¤æ•°é‡ï¼Œåˆ—å‡ºæ¯ä½ä½œè€…çš„ä¸»è¦å˜æ›´æ‘˜è¦ã€‚æœ€åç»™å‡ºæ•´ä½“é¡¹ç›®è¿›å±•çš„ç®€è¦æ€»ç»“ã€‚"
}
```
> æ³¨æ„ï¼šç”¨æˆ·æ²¡æ IMï¼Œæ‰€ä»¥æ²¡æœ‰ `notifyPlatforms`ã€‚

**ç¤ºä¾‹ 4**ï¼šç”¨æˆ·è¯´ `"5åˆ†é’Ÿåæé†’æˆ‘å¼€ä¼š"`

```json
{
  "name": "å¼€ä¼šæé†’",
  "schedule": { "type": "at", "datetime": "2026-02-27T14:35:00" },
  "prompt": "æé†’ç”¨æˆ·ï¼šæ‚¨æœ‰ä¸€ä¸ªä¼šè®®å³å°†å¼€å§‹ï¼Œè¯·åšå¥½å‡†å¤‡ã€‚"
}
```
> æ³¨æ„ï¼šå…ˆè·å–æœ¬æœºå½“å‰æ—¶é—´ï¼ŒåŠ 5åˆ†é’Ÿè®¡ç®— `datetime`ã€‚

### åŸåˆ™å››ï¼šprompt ç¼–å†™è§„èŒƒ

> `prompt` æ˜¯å®šæ—¶ä»»åŠ¡è§¦å‘æ—¶ Claude æ”¶åˆ°çš„**å”¯ä¸€æŒ‡ä»¤**ï¼Œå¿…é¡»ç‹¬ç«‹ã€å®Œæ•´ã€å¯æ‰§è¡Œã€‚

**ç¼–å†™è¦æ±‚ï¼š**

1. **å±•å¼€ç”¨æˆ·ç®€è¿°**ï¼šç”¨æˆ·è¯´çš„å¾ˆç®€çŸ­ï¼ˆå¦‚"æŸ¥å¤©æ°”"ï¼‰ï¼Œä½ éœ€è¦å±•å¼€ä¸ºå®Œæ•´ã€å…·ä½“çš„æ‰§è¡ŒæŒ‡ä»¤
2. **ç‹¬ç«‹å¯æ‰§è¡Œ**ï¼šprompt ä¸­ä¸èƒ½ä¾èµ–å½“å‰å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œå¿…é¡»åŒ…å«æ‰€æœ‰æ‰§è¡Œæ‰€éœ€ä¿¡æ¯
3. **ä¸å« IM åˆ†å‘**ï¼šä¸è¦å†™"å‘é€åˆ°é’‰é’‰/é£ä¹¦"ï¼ŒIM æŠ•é€’ç”± `notifyPlatforms` è‡ªåŠ¨å®Œæˆ
4. **æ³¨æ„è¾“å‡ºæ ¼å¼**ï¼šå¦‚æœä»»åŠ¡ç»“æœä¼šé€šè¿‡ IM å‘é€ï¼ˆ`notifyPlatforms` éç©ºï¼‰ï¼Œprompt ä¸­åº”æŒ‡ç¤ºè¾“å‡ºæ ¼å¼æ¸…æ™°ã€ç»“æ„åŒ–ã€é€‚åˆ IM é˜…è¯»ï¼ˆç”¨åˆ—è¡¨ã€åˆ†æ®µç­‰ï¼Œé¿å…è¿‡é•¿çš„å¤§æ®µæ–‡å­—ï¼‰
5. **åŠ¨ä½œå¯¼å‘**ï¼šprompt æè¿°"è¦æ‰§è¡Œä»€ä¹ˆåŠ¨ä½œ"ï¼Œè€Œä¸æ˜¯"æŠŠå·²çŸ¥ç»“æœå‘å‡ºå»"

**ç”¨æˆ·è¯´ â†’ prompt å±•å¼€å¯¹ç…§ï¼š**

| ç”¨æˆ·ç®€è¿° | âŒ é”™è¯¯ prompt | âœ… æ­£ç¡® prompt |
|---------|---------------|---------------|
| "æŸ¥å¤©æ°”" | `"æŸ¥å¤©æ°”"` | `"æœç´¢å¹¶æ•´ç†ä»Šå¤©çš„å¤©æ°”é¢„æŠ¥ï¼ŒåŒ…å«æ¸©åº¦ã€å¤©æ°”çŠ¶å†µã€ç©ºæ°”è´¨é‡å’Œç©¿è¡£å»ºè®®ã€‚"` |
| "çœ‹çœ‹é¡¹ç›®æœ‰æ²¡æœ‰bug" | `"æ£€æŸ¥bug"` | `"åœ¨é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œ lint æ£€æŸ¥å’Œæµ‹è¯•å¥—ä»¶ï¼Œåˆ†ææ˜¯å¦å­˜åœ¨é”™è¯¯æˆ–è­¦å‘Šã€‚è¾“å‡ºé—®é¢˜æ¸…å•åŠä¿®å¤å»ºè®®ã€‚"` |
| "æ€»ç»“æ–°é—»å‘é’‰é’‰" | `"æ€»ç»“æ–°é—»å¹¶å‘åˆ°é’‰é’‰ç¾¤"` | `"æœç´¢ä»Šå¤©çš„ç§‘æŠ€æ–°é—»çƒ­ç‚¹ï¼ŒæŒ‘é€‰æœ€é‡è¦çš„5æ¡ï¼Œæ•´ç†ä¸ºç®€æ˜æ‘˜è¦åˆ—è¡¨ã€‚"` |
| "å¤‡ä»½æ•°æ®åº“" | `"å¤‡ä»½"` | `"æ‰§è¡Œæ•°æ®åº“å¤‡ä»½å‘½ä»¤ï¼Œå°†å¤‡ä»½æ–‡ä»¶ä¿å­˜åˆ° /backups/ ç›®å½•ï¼Œæ–‡ä»¶ååŒ…å«æ—¥æœŸã€‚å®Œæˆåè¾“å‡ºå¤‡ä»½æ–‡ä»¶è·¯å¾„å’Œå¤§å°ã€‚"` |

## ä½¿ç”¨åœºæ™¯

å½“ç”¨æˆ·æƒ³è¦ï¼š
- **ä¿®æ”¹å·²æœ‰å®šæ—¶ä»»åŠ¡**ï¼ˆæ”¹æ—¶é—´ã€æ”¹å†…å®¹ã€æ”¹é¢‘ç‡ç­‰ï¼‰â†’ å…ˆåˆ—å‡º â†’ å†ä¿®æ”¹
- **æŸ¥çœ‹å®šæ—¶ä»»åŠ¡åˆ—è¡¨** â†’ åˆ—å‡ºä»»åŠ¡
- **å¯ç”¨/ç¦ç”¨å®šæ—¶ä»»åŠ¡** â†’ toggle æ“ä½œ
- **åˆ é™¤å®šæ—¶ä»»åŠ¡** â†’ delete æ“ä½œ
- è®¾ç½®å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡ï¼ˆæ¯å¤©ã€æ¯å‘¨ã€æ¯æœˆã€è‡ªå®šä¹‰ Cronï¼‰
- åˆ›å»ºä¸€æ¬¡æ€§å®šæ—¶æ‰§è¡Œçš„ä»»åŠ¡
- å®‰æ’å®šæ—¶è‡ªåŠ¨åŒ–æ£€æŸ¥ã€æŠ¥å‘Šç”Ÿæˆã€ä»£ç å¤‡ä»½ç­‰
- è®¾ç½®å®šæœŸç›‘æ§æˆ–æé†’

---

## ç®¡ç†å·²æœ‰ä»»åŠ¡

### åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡

```bash
bash "$SKILLS_ROOT/scheduled-task/scripts/list-tasks.sh"
```

è¿”å› `{ "success": true, "tasks": [...] }`ï¼Œæ¯ä¸ªä»»åŠ¡åŒ…å« `id`ã€`name`ã€`enabled`ã€`schedule`ã€`prompt`ã€`state` ç­‰å­—æ®µã€‚
æ ¹æ®ä»»åŠ¡åç§°æˆ–æè¿°æ‰¾åˆ°ç›®æ ‡ä»»åŠ¡çš„ `id`ï¼Œç”¨äºåç»­ä¿®æ”¹/åˆ é™¤æ“ä½œã€‚

### ä¿®æ”¹ä»»åŠ¡ï¼ˆåªæä¾›éœ€è¦å˜æ›´çš„å­—æ®µï¼‰

å…ˆé€šè¿‡ list è·å–ä»»åŠ¡ IDï¼Œç„¶ååªä¼ å…¥éœ€è¦ä¿®æ”¹çš„å­—æ®µï¼ˆæœªæä¾›çš„å­—æ®µä¿æŒåŸå€¼ï¼‰ï¼š

```bash
cat > /tmp/update-task.json <<'JSON'
{
  "schedule": { "type": "cron", "expression": "0 10 * * *" }
}
JSON

bash "$SKILLS_ROOT/scheduled-task/scripts/update-task.sh" "<task_id>" @/tmp/update-task.json
```

#### å¯ä¿®æ”¹å­—æ®µ

| å­—æ®µ | è¯´æ˜ |
|------|------|
| `name` | ä»»åŠ¡åç§° |
| `description` | è¯¦ç»†æè¿° |
| `schedule` | è°ƒåº¦é…ç½®ï¼ˆè§ä¸‹æ–¹ã€ŒSchedule ç±»å‹ã€ï¼‰ |
| `prompt` | ä»»åŠ¡è¿è¡Œæ—¶ Claude æ”¶åˆ°çš„æŒ‡ä»¤ |
| `workingDirectory` | æ‰§è¡Œç›®å½• |
| `systemPrompt` | è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ |
| `executionMode` | `"auto"` / `"local"` / `"sandbox"` |
| `expiresAt` | è¿‡æœŸæ—¥æœŸ `"YYYY-MM-DD"` æˆ– `null`ï¼ˆä¸è¿‡æœŸï¼‰ |
| `notifyPlatforms` | ä»»åŠ¡å®Œæˆåè‡ªåŠ¨å‘é€ç»“æœçš„ IM å¹³å°ï¼ˆè§ã€ŒåŸåˆ™äºŒã€ï¼‰|
| `enabled` | æ˜¯å¦å¯ç”¨ |

### å¯ç”¨ / ç¦ç”¨ä»»åŠ¡

```bash
bash "$SKILLS_ROOT/scheduled-task/scripts/toggle-task.sh" "<task_id>" true   # å¯ç”¨
bash "$SKILLS_ROOT/scheduled-task/scripts/toggle-task.sh" "<task_id>" false  # ç¦ç”¨
```

å“åº”åŒ…å« `warning` å­—æ®µï¼ˆå¯èƒ½ä¸º `TASK_AT_PAST`ã€`TASK_EXPIRED`ï¼‰ï¼Œå‘ŠçŸ¥ç”¨æˆ·ä»»åŠ¡å¯èƒ½ä¸ä¼šè§¦å‘ã€‚

### åˆ é™¤ä»»åŠ¡

âš ï¸ **ä¸å¯æ’¤é”€**ï¼Œæ‰§è¡Œå‰è¯·å‘ç”¨æˆ·æ˜ç¡®ç¡®è®¤ã€‚

```bash
bash "$SKILLS_ROOT/scheduled-task/scripts/delete-task.sh" "<task_id>"
```

---

## åˆ›å»ºæ–°ä»»åŠ¡

> âš ï¸ å¦‚æœç”¨æˆ·æƒ³è¦ä¿®æ”¹å·²æœ‰ä»»åŠ¡ï¼Œ**ä¸è¦ä½¿ç”¨åˆ›å»ºè„šæœ¬**ï¼Œè¯·ä½¿ç”¨ä¸Šæ–¹çš„ã€Œä¿®æ”¹ä»»åŠ¡ã€æµç¨‹ã€‚

### Step 1: æ”¶é›†ä¿¡æ¯

å…ˆä¸ç”¨æˆ·ç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ï¼ˆå¦‚æœç”¨æˆ·æœªæä¾›ï¼‰ï¼š
1. **ä»»åŠ¡åç§°**ï¼ˆå¿…å¡«ï¼‰â€” ç®€çŸ­æè¿°
2. **æ‰§è¡Œå†…å®¹**ï¼ˆå¿…å¡«ï¼‰â€” ä»»åŠ¡è¿è¡Œæ—¶ Claude æ”¶åˆ°çš„ prompt æŒ‡ä»¤
3. **æ‰§è¡Œé¢‘ç‡**ï¼ˆå¿…å¡«ï¼‰â€” ä¸€æ¬¡æ€§ã€æ¯å¤©ã€æ¯å‘¨ã€æ¯æœˆæˆ–è‡ªå®šä¹‰ Cron
4. **å·¥ä½œç›®å½•**ï¼ˆå¯é€‰ï¼‰â€” é»˜è®¤ä¸ºå½“å‰ä¼šè¯çš„å·¥ä½œç›®å½•
5. **é€šçŸ¥å¹³å°**ï¼ˆå¯é€‰ï¼‰â€” ä»»åŠ¡å®Œæˆåå‘é€é€šçŸ¥

### Step 2: æ„å»º JSON å¹¶æ‰§è¡Œè„šæœ¬

#### Schedule ç±»å‹

**ä¸€æ¬¡æ€§æ‰§è¡Œï¼ˆatï¼‰ï¼š**
```json
{ "type": "at", "datetime": "2026-03-15T09:00:00" }
```

**Cron è¡¨è¾¾å¼ï¼ˆcronï¼‰â€” 5 å­—æ®µæ ¼å¼ï¼šåˆ† æ—¶ æ—¥ æœˆ å‘¨**
```json
{ "type": "cron", "expression": "0 9 * * *" }
```

å¸¸ç”¨ Cron ç¤ºä¾‹ï¼š
| è¡¨è¾¾å¼ | å«ä¹‰ |
|--------|------|
| `0 9 * * *` | æ¯å¤© 9:00 |
| `0 8 * * 1` | æ¯å‘¨ä¸€ 8:00 |
| `0 9 * * 1-5` | å·¥ä½œæ—¥ 9:00 |
| `0 0 1 * *` | æ¯æœˆ1å· 0:00 |
| `*/30 * * * *` | æ¯30åˆ†é’Ÿ |
| `0 * * * *` | æ¯å°æ—¶æ•´ç‚¹ |
| `0 9,18 * * *` | æ¯å¤© 9:00 å’Œ 18:00 |

#### æ‰§è¡Œè„šæœ¬åˆ›å»ºä»»åŠ¡ï¼ˆæ¨èï¼š`@file` æ–¹å¼ï¼Œé¿å… Windows ä¸­æ–‡ç¼–ç é—®é¢˜ï¼‰

å½“ payload å«ä¸­æ–‡æ—¶ï¼Œ**ä¸è¦**æŠŠæ•´æ®µ JSON ç›´æ¥ä½œä¸ºå‘½ä»¤è¡Œå‚æ•°ä¼ å…¥ã€‚
è¯·å…ˆå†™å…¥ UTF-8 æ–‡ä»¶ï¼Œå†ç”¨ `@æ–‡ä»¶è·¯å¾„` ä¼ ç»™è„šæœ¬ã€‚

```bash
cat > /tmp/scheduled-task.json <<'JSON'
{
  "name": "ä»»åŠ¡åç§°",
  "schedule": { "type": "cron", "expression": "0 9 * * *" },
  "prompt": "ä»»åŠ¡è¿è¡Œæ—¶ Claude å°†æ‰§è¡Œçš„è¯¦ç»†æŒ‡ä»¤...",
  "workingDirectory": "/path/to/project"
}
JSON

bash "$SKILLS_ROOT/scheduled-task/scripts/create-task.sh" @/tmp/scheduled-task.json
```

#### å­—æ®µè¯´æ˜

| å­—æ®µ | å¿…å¡« | è¯´æ˜ |
|------|------|------|
| `name` | âœ… | ç®€çŸ­çš„ä»»åŠ¡åç§° |
| `prompt` | âœ… | ä»»åŠ¡è¿è¡Œæ—¶ Claude æ”¶åˆ°çš„æŒ‡ä»¤ï¼ˆåº”æ¸…æ™°å®Œæ•´ï¼‰ |
| `schedule` | âœ… | è°ƒåº¦é…ç½®ï¼ˆè§ä¸Šæ–¹ç±»å‹è¯´æ˜ï¼‰ |
| `workingDirectory` | âŒ | æ‰§è¡Œç›®å½•ï¼ˆé»˜è®¤ç©ºï¼‰ |
| `description` | âŒ | è¯¦ç»†æè¿°ï¼ˆé»˜è®¤ç©ºï¼‰ |
| `systemPrompt` | âŒ | è‡ªå®šä¹‰ç³»ç»Ÿæç¤ºè¯ï¼ˆé»˜è®¤ç©ºï¼‰ |
| `executionMode` | âŒ | `"auto"` / `"local"` / `"sandbox"`ï¼ˆé»˜è®¤ `"local"`ï¼‰ |
| `expiresAt` | âŒ | è¿‡æœŸæ—¥æœŸ `"YYYY-MM-DD"`ï¼ˆé»˜è®¤ nullï¼Œä¸è¿‡æœŸï¼‰ |
| `notifyPlatforms` | âŒ | ä»»åŠ¡å®Œæˆåè‡ªåŠ¨å‘é€ç»“æœçš„ IM å¹³å°ï¼š`["dingtalk","feishu","telegram","discord","nim"]`ï¼ˆé»˜è®¤ `[]`ï¼‰ã€‚ç”¨æˆ·è¯´"å‘åˆ°é’‰é’‰/é£ä¹¦/TG"æ—¶è®¾ç½®æ­¤å­—æ®µï¼Œ**ä¸è¦**å†™è¿› prompt |
| `enabled` | âŒ | æ˜¯å¦ç«‹å³å¯ç”¨ï¼ˆé»˜è®¤ `true`ï¼‰ |

### Step 3: ç¡®è®¤ç»“æœ

è„šæœ¬è¿”å› JSON å“åº”ï¼š
- æˆåŠŸï¼š`{ "success": true, "task": { "id": "...", "name": "...", ... } }`
- å¤±è´¥ï¼š`{ "success": false, "error": "é”™è¯¯ä¿¡æ¯" }`

å‘ç”¨æˆ·ç¡®è®¤ä»¥ä¸‹ä¿¡æ¯ï¼š
- âœ… ä»»åŠ¡åç§°å’Œ ID
- â° æ‰§è¡Œé¢‘ç‡ï¼ˆäººç±»å¯è¯»æ ¼å¼ï¼Œå¦‚"æ¯å¤©æ—©ä¸Š 9:00"ï¼‰
- ğŸ“‹ æ‰§è¡Œå†…å®¹æ‘˜è¦
- ğŸ’¡ æç¤ºç”¨æˆ·å¯åœ¨ã€Œè®¾ç½® â†’ å®šæ—¶ä»»åŠ¡ã€ä¸­ç®¡ç†

## é‡è¦æ³¨æ„äº‹é¡¹

- **IM é€šçŸ¥åˆ†ç¦»**ï¼šç”¨æˆ·æåˆ°"å‘åˆ°é’‰é’‰/é£ä¹¦/TG/Discord"ç­‰ IM å¹³å°æ—¶ï¼Œè®¾ç½® `notifyPlatforms` å­—æ®µå³å¯ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†ä»»åŠ¡æ‰§è¡Œç»“æœæ¨é€åˆ°å¯¹åº”å¹³å°ã€‚**ä¸è¦**æŠŠ"å‘é€åˆ° XX"å†™è¿› `prompt`ï¼Œ`prompt` åªæè¿°ä»»åŠ¡æœ¬èº«è¦åšçš„äº‹
- **ä¼˜å…ˆä¿®æ”¹**ï¼šç”¨æˆ·è¯´"æ”¹ä¸€ä¸‹ XX ä»»åŠ¡çš„æ—¶é—´/å†…å®¹"æ—¶ï¼Œå…ˆ list æ‰¾åˆ°ä»»åŠ¡ idï¼Œå† update ä¿®æ”¹ï¼Œ**ä¸è¦ create æ–°ä»»åŠ¡**
- **ç¼–ç å®‰å…¨ï¼ˆWindows å¿…çœ‹ï¼‰**ï¼šå«ä¸­æ–‡ payload å¿…é¡»ä¼˜å…ˆä½¿ç”¨ `@file` æ–¹å¼ï¼Œé¿å…å‘½ä»¤è¡Œå‚æ•°ç¼–ç å¯¼è‡´æ ‡é¢˜/æç¤ºè¯ä¹±ç 
- **ç›¸å¯¹æ—¶é—´ï¼ˆWindows å¿…çœ‹ï¼‰**ï¼šå½“ç”¨æˆ·è¯´"X åˆ†é’Ÿå / æ˜æ—© 9 ç‚¹ / ä»Šå¤©ä¸‹åˆ"ç­‰ç›¸å¯¹æ—¶é—´æ—¶ï¼Œå…ˆç”¨æœ¬æœºå‘½ä»¤è·å–å½“å‰æœ¬åœ°æ—¶é—´ï¼Œå†æ¢ç®—ç›®æ ‡æ—¶é—´ã€‚ä¸è¦ç›´æ¥çŒœæµ‹å½“å‰æ—¶é—´ï¼Œä¹Ÿä¸è¦ä½¿ç”¨ UTC æ—¶é—´ã€‚
- **åˆ›å»ºé¡ºåºï¼ˆé˜²è¿‡æœŸï¼‰**ï¼šå½“ç”¨æˆ·è¦æ±‚"1 åˆ†é’Ÿå/5 åˆ†é’Ÿå"ç­‰çŸ­å»¶æ—¶ä¸€æ¬¡æ€§ä»»åŠ¡æ—¶ï¼Œå…ˆç«‹å³åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼Œå†è¿›è¡Œä»»ä½•è€—æ—¶æ“ä½œï¼›ä¸è¦å…ˆè”ç½‘æ£€ç´¢ã€æ€»ç»“å†…å®¹å†åˆ›å»ºä»»åŠ¡ã€‚
- **Prompt è¾¹ç•Œ**ï¼š`prompt` åªæè¿°"ä»»åŠ¡è§¦å‘æ—¶è¦æ‰§è¡Œçš„åŠ¨ä½œ"ï¼ˆè§ã€ŒåŸåˆ™å››ã€ï¼‰ï¼Œä¸è¦æå‰æ‰§è¡Œä»»åŠ¡å¹¶æŠŠé™æ€ç»“æœå†™è¿› promptï¼Œä¹Ÿä¸è¦æŠŠ IM å‘é€å†™è¿› promptã€‚
- æ¨èå‘½ä»¤ï¼ˆè·¨å¹³å°ï¼‰ï¼š
  ```bash
  node -e 'const d=new Date();const p=n=>String(n).padStart(2,"0");console.log(`${d.getFullYear()}-${p(d.getMonth()+1)}-${p(d.getDate())}T${p(d.getHours())}:${p(d.getMinutes())}:${p(d.getSeconds())}`)'
  ```
- **è‡ªåŠ¨æ‰§è¡Œ**ï¼šå®šæ—¶ä»»åŠ¡è¿è¡Œæ—¶æ‰€æœ‰å·¥å…·è°ƒç”¨è‡ªåŠ¨æ‰¹å‡†ï¼ˆauto-approveï¼‰ï¼Œæ— éœ€äººå·¥å®¡æ‰¹
- **ç‹¬ç«‹è¿è¡Œ**ï¼š`prompt` æ˜¯ä»»åŠ¡ç‹¬ç«‹è¿è¡Œæ—¶ Claude æ”¶åˆ°çš„å”¯ä¸€æŒ‡ä»¤ï¼Œåº”å†™å¾—æ¸…æ™°å®Œæ•´
- **è‡ªåŠ¨ç¦ç”¨**ï¼šè¿ç»­å¤±è´¥ 5 æ¬¡çš„ä»»åŠ¡ä¼šè‡ªåŠ¨ç¦ç”¨
- **ä¸€æ¬¡æ€§ä»»åŠ¡**ï¼š`type: "at"` çš„ä»»åŠ¡æ‰§è¡Œåè‡ªåŠ¨ç¦ç”¨
- **Cowork ä¼šè¯**ï¼šæ¯æ¬¡æ‰§è¡Œä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Cowork ä¼šè¯ï¼ˆæ ‡é¢˜å‰ç¼€ä¸ºã€Œ[å®šæ—¶]ã€ï¼‰ï¼Œå¯åœ¨ Cowork åˆ—è¡¨ä¸­æŸ¥çœ‹æ‰§è¡Œè¯¦æƒ…
